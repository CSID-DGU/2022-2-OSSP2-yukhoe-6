<!DOCTYPE html>
<html>
  <head>
    <%- include('../partials/head') %>
    <link rel="stylesheet"  type="text/css" href="/css/studyRoom/index.css">
  </head>

  <body>
    <%- include('../partials/nav') %>

    <div style="padding-bottom: 100px;" >
    <div style="position: relative; top:50px; ">
      <h2   style="font-weight: bold; color: #707070; margin-left: 20%;">Study Room</h2>
      <hr  style=" margin-top: 20px; margin-bottom: 65px; margin-left: 15% ; display: block; width: 70%; ">
    </div>
    
    <div class="text" style="display: flex; width: 80%; margin-left:20%;  top:30px;"> 
      <a class="text  button createButton" 
      style="width: 100%; height: 60px; margin-top:15px; margin-bottom:15px; margin-right:28%; padding: 15px 10px 5px 10px; background-color: #a6bf82; border: solid 3px #a6bf82; font-size: 18px; color: #fff; text-decoration: none;" 
      href="/studies/create">스터디방 만들기</a>
    </div>
    
    <%#div class="text" style="display: flex; width: 60%; margin-left:19%;  margin-top: 20px; margin-bottom: 27px; top:50px;border-bottom: dotted 1px #a6bf82; "> 
      <hr  style=" margin-top: 20px; margin-bottom: 35px; margin-left: 15% ; display: block; width: 70%; ">
    </div%> 

    <div style="width:70%; margin-left:19%;top:30px; display: flex;; flex-wrap: wrap;">
      <% if(rooms == null || rooms.length == 0){ %>
        <h2>현재 생성된 스터디방이 없습니다</h2> <br> <% } %>

      <% rooms.forEach(function(room) { %>
        <div class="contentBlock" style="position: relative; width:280px; height:320p; margin-left: 20px; ">
      
          <div class="text" style="color: #4d4d4d; font-weight: bold;">스터디방 이름:
            <label class="text deadLine" > <%= room.title %></label>
          </div>

          <div class="text" style="color: #4d4d4d; font-weight: bold;">스터디 리더:
            <label class="text deadLine" >  <%= room.leader ? room.leader.username : "" %></label>
          </div>

          <div class="text" style="color: #4d4d4d; font-weight: bold;">최대 인원수:
            <label class="text deadLine" > <%= room.maximum %></label>
          </div>

          <div class="text" style="color: #4d4d4d; font-weight: bold;">스터디방 정보:
            <label class="text deadLine" >  <%= room.content %></label>
          </div>

          <% allRoomArr.forEach(r => { 
            if (r[0]===room.title){ %>
              <div class="text" style="color: #4d4d4d; font-weight: bold; margin-bottom: 20px;">방 인원:
                <label class="text deadLine" >  <%= r[1] %></label>
              </div>      

          <%  }
          })
          %>

          <div class="text" style="position: absolute;  padding: 8px 20px 8px 20px; bottom: 4px;; width:245px; color: #4d4d4d; font-weight: bold; margin-top: 8px; margin-bottom: 5px; text-align: center;">
            <a class="text button" style="color: #fff; text-decoration: none;width:205px;  background-color: #707070; " href="/studies/<%= room._id %>">참여하기</a>   
            <% if (room.leader.username== currentUser.username) { %>
                <a class="text button" style="color: #fff; text-decoration: none;width:205px;  background-color: #a6bf82; " href="/studies/delete/<%= room._id %>">방 삭제하기</a>
            <% } %>
           </div>
          
           </div>

      
        <% }) %>
    </div>
    
    </div>
    <div style="  position : relative; transform : translateY(-100%);"></div>


  </body>
</html>